flowchart TB
    subgraph Internet["ğŸŒ Internet"]
        ExtServices["External Services"]
    end

    subgraph ProdNetwork["ğŸ”’ PRODUCTION NETWORK"]
        subgraph NetAcctProd["ğŸŒ AWS Account: Networking (Prod)<br/>Account ID: 590183907424"]
            TGWProd["ğŸ”— Transit Gateway<br/>Network Hub"]
            NATProd["ğŸŒ NAT Gateway<br/>Internet Access"]
            IPAMProd["ğŸ“Š IPAM Pool<br/>10.0.0.0/8<br/>IP Management"]
            CentralVPCProd["ğŸ—ï¸ Central VPC<br/>10.1.0.0/16"]
            NetDeployProd["ğŸš€ Network Deployment Functions<br/>â€¢ VPC sharing approval<br/>â€¢ Route table management<br/>â€¢ Cross-account connectivity"]
        end
        
        subgraph EKSAcctProd["âš™ï¸ AWS Account: EKS Platform<br/>Account ID: 975050243618"]
            EKSVPCProd["ğŸ“¦ VPC: 10.2.0.0/16"]
            EKSProd["â˜¸ï¸ EKS Cluster"]
            EKSDeployProd["ğŸš€ K8s Deployment Functions<br/>â€¢ Manifest deployment<br/>â€¢ ServiceAccount management<br/>â€¢ IRSA configuration"]
        end
        
        subgraph RDSAcctProd["ğŸ—„ï¸ AWS Account: RDS Platform<br/>Account ID: 975050243618"]
            RDSVPCProd["ğŸ“¦ VPC: 10.3.0.0/16"]
            RDSProd["ğŸ—„ï¸ RDS Cluster"]
            RDSDeployProd["ğŸš€ DB Deployment Functions<br/>â€¢ Schema deployment<br/>â€¢ Role/user management<br/>â€¢ Access control"]
        end
        
        subgraph App1AcctProd["ğŸ“± AWS Account: App Workload 1 (Enver 1)<br/>Account ID: 590184130740"]
            App1VPCProd["ğŸ“¦ VPC: 10.4.0.0/16"]
            App1ResProd["ğŸ’¾ Application Resources<br/>â€¢ IAM Role 1 (DynamoDB)<br/>â€¢ IAM Role 2 (RDS)<br/>â€¢ S3 buckets, secrets"]
            App1ManifestProd["ğŸ“‹ K8s Manifests<br/>â€¢ Deployment definitions<br/>â€¢ ServiceAccount configs"]
            App1SchemaProd["ğŸ—ƒï¸ DB Schema/Roles<br/>â€¢ Application database<br/>â€¢ User permissions"]
        end
        
        subgraph App2AcctProd["ğŸ“± AWS Account: App Workload 2 (Enver 2)<br/>Account ID: 590184130740"]
            App2VPCProd["ğŸ“¦ VPC: 10.5.0.0/16"]
            App2ResProd["ğŸ’¾ Application Resources<br/>â€¢ IAM Role A (DB via TGW)<br/>â€¢ IAM Role B (S3)<br/>â€¢ Configuration"]
            App2ManifestProd["ğŸ“‹ K8s Manifests<br/>â€¢ Deployment definitions<br/>â€¢ ServiceAccount configs"]
        end
        
        subgraph CentralAcctProd["ğŸ¯ AWS Account: Central (Platform Orchestration)<br/>Account ID: 590184031795"]
            CentralControlProd["ğŸ¯ Platform Orchestration<br/>â€¢ Cross-account deployment coordination<br/>â€¢ Environment versioning<br/>â€¢ Policy as Code Engine"]
        end
    end

    subgraph LENetwork["ğŸ› ï¸ LOWER ENVIRONMENT NETWORK"]
        subgraph NetAcctLE["ğŸŒ AWS Account: Networking (LE)<br/>Account ID: 590183907424"]
            TGWLE["ğŸ”— Transit Gateway<br/>Network Hub"]
            NATLE["ğŸŒ NAT Gateway<br/>Internet Access"]
            IPAMLE["ğŸ“Š IPAM Pool<br/>172.16.0.0/12<br/>IP Management"]
            CentralVPCLE["ğŸ—ï¸ Central VPC<br/>172.16.1.0/16"]
            NetDeployLE["ğŸš€ Network Deployment Functions<br/>â€¢ VPC sharing approval<br/>â€¢ Route table management<br/>â€¢ Cross-account connectivity"]
        end
        
        subgraph EKSAcctLE["âš™ï¸ AWS Account: EKS Platform<br/>Account ID: 975050243618"]
            EKSVPCLENet["ğŸ“¦ VPC: 172.16.2.0/16"]
            EKSLENet["â˜¸ï¸ EKS Cluster"]
            EKSDeployLE["ğŸš€ K8s Deployment Functions<br/>â€¢ Manifest deployment<br/>â€¢ ServiceAccount management<br/>â€¢ IRSA configuration"]
        end
        
        subgraph RDSAcctLE["ğŸ—„ï¸ AWS Account: RDS Platform<br/>Account ID: 975050243618"]
            RDSVPCLENet["ğŸ“¦ VPC: 172.16.3.0/16"]
            RDSLENet["ğŸ—„ï¸ RDS Cluster"]
            RDSDeployLE["ğŸš€ DB Deployment Functions<br/>â€¢ Schema deployment<br/>â€¢ Role/user management<br/>â€¢ Access control"]
        end
        
        subgraph App1AcctLE["ğŸ“± AWS Account: App Workload 1<br/>Account ID: 590184130740"]
            App1VPCLENet["ğŸ“¦ VPC: 172.16.4.0/16"]
            App1ResLENet["ğŸ’¾ Application Resources<br/>â€¢ IAM roles<br/>â€¢ S3 buckets, secrets<br/>â€¢ Configuration"]
            App1ManifestLE["ğŸ“‹ K8s Manifests<br/>â€¢ Deployment definitions<br/>â€¢ ServiceAccount configs"]
            App1SchemaLE["ğŸ—ƒï¸ DB Schema/Roles<br/>â€¢ Application database<br/>â€¢ User permissions"]
        end
        
        subgraph CentralAcctLE["ğŸ¯ AWS Account: Central (Platform Orchestration)<br/>Account ID: 590184031795"]
            CentralControlLE["ğŸ¯ Platform Orchestration<br/>â€¢ Cross-account deployment coordination<br/>â€¢ Environment versioning<br/>â€¢ Policy as Code Engine"]
        end
    end

    %% Production Network Connections
    TGWProd === CentralVPCProd
    TGWProd === EKSVPCProd
    TGWProd === RDSVPCProd
    TGWProd === App1VPCProd
    TGWProd === App2VPCProd
    TGWProd --> NATProd
    
    %% LE Network Connections
    TGWLE === CentralVPCLE
    TGWLE === EKSVPCLENet
    TGWLE === RDSVPCLENet
    TGWLE === App1VPCLENet
    TGWLE --> NATLE

    %% Internet Access
    NATProd --> ExtServices
    NATLE --> ExtServices

    %% IPAM Management
    IPAMProd -.-> CentralVPCProd
    IPAMProd -.-> EKSVPCProd
    IPAMProd -.-> RDSVPCProd
    IPAMProd -.-> App1VPCProd
    IPAMProd -.-> App2VPCProd
    
    IPAMLE -.-> CentralVPCLE
    IPAMLE -.-> EKSVPCLENet
    IPAMLE -.-> RDSVPCLENet
    IPAMLE -.-> App1VPCLENet

    %% Cross-Account Deployment Flows (Production)
    %% Central Account Orchestration
    CentralControlProd -.->|"ğŸ¯ Orchestrate Cross-Account Deployments"| NetDeployProd
    CentralControlProd -.->|"ğŸ¯ Orchestrate Cross-Account Deployments"| EKSDeployProd
    CentralControlProd -.->|"ğŸ¯ Orchestrate Cross-Account Deployments"| RDSDeployProd
    
    %% Enver 1 Deployment Flow (Account 590184130740 â†’ 975050243618)
    App1ManifestProd ==>|"ğŸš€ Cross-Account Deploy<br/>590184130740 â†’ 975050243618"| EKSDeployProd
    EKSDeployProd ==>|"â˜¸ï¸ Deploy to Cluster"| EKSProd
    App1SchemaProd ==>|"ğŸš€ Cross-Account Deploy<br/>590184130740 â†’ 975050243618"| RDSDeployProd
    RDSDeployProd ==>|"ğŸ—„ï¸ Deploy to Database"| RDSProd
    
    %% Enver 2 Deployment Flow (Account 590184130740 â†’ 975050243618, No VPC needed)
    App2ManifestProd ==>|"ğŸš€ Cross-Account Deploy<br/>590184130740 â†’ 975050243618"| EKSDeployProd
    
    %% Network Management Flows (590183907424 â†’ Application Accounts)
    NetDeployProd -.->|"ğŸ”— Cross-Account VPC Sharing<br/>590183907424 â†’ 590184130740"| App1VPCProd
    NetDeployProd -.->|"ğŸ”— Cross-Account VPC Sharing<br/>590183907424 â†’ 590184130740"| App2VPCProd
    NetDeployProd -.->|"ğŸ”— Route Management"| TGWProd

    %% Runtime Communication (Production - Cross-Account via TGW)
    %% Enver 1: Pod assuming IAM Role 1 to access DynamoDB, IAM Role 2 to access RDS via TGW
    EKSProd -.->|"ğŸ” Cross-Account IRSA<br/>975050243618 â†’ 590184130740<br/>IAM Role 1 â†’ DynamoDB"| App1ResProd
    EKSProd -.->|"ğŸ” Cross-Account IRSA<br/>975050243618 â†’ 975050243618<br/>IAM Role 2 â†’ RDS via TGW"| RDSProd
    
    %% Enver 2: Pod assuming IAM Role A to access DB via TGW, IAM Role B to access S3
    EKSProd -.->|"ğŸ” Cross-Account IRSA<br/>975050243618 â†’ 975050243618<br/>IAM Role A â†’ DB via TGW"| RDSProd
    EKSProd -.->|"ğŸ” Cross-Account IRSA<br/>975050243618 â†’ 590184130740<br/>IAM Role B â†’ S3"| App2ResProd

    %% LE Environment Deployment Flows (Cross-Account)
    CentralControlLE -.->|"ğŸ¯ Orchestrate Cross-Account Deployments"| NetDeployLE
    CentralControlLE -.->|"ğŸ¯ Orchestrate Cross-Account Deployments"| EKSDeployLE
    CentralControlLE -.->|"ğŸ¯ Orchestrate Cross-Account Deployments"| RDSDeployLE
    
    App1ManifestLE ==>|"ğŸš€ Cross-Account Deploy<br/>590184130740 â†’ 975050243618"| EKSDeployLE
    EKSDeployLE ==>|"â˜¸ï¸ Deploy to Cluster"| EKSLENet
    App1SchemaLE ==>|"ğŸš€ Cross-Account Deploy<br/>590184130740 â†’ 975050243618"| RDSDeployLE
    RDSDeployLE ==>|"ğŸ—„ï¸ Deploy to Database"| RDSLENet
    
    NetDeployLE -.->|"ğŸ”— Cross-Account VPC Sharing<br/>590183907424 â†’ 590184130740"| App1VPCLENet
    NetDeployLE -.->|"ğŸ”— Route Management"| TGWLE

    %% VPC Components
    CentralVPCProd --- NetDeployProd
    EKSVPCProd --- EKSProd
    EKSVPCProd --- EKSDeployProd
    RDSVPCProd --- RDSProd
    RDSVPCProd --- RDSDeployProd
    App1VPCProd --- App1ResProd
    App1VPCProd --- App1ManifestProd
    App1VPCProd --- App1SchemaProd
    App2VPCProd --- App2ResProd
    App2VPCProd --- App2ManifestProd
    
    CentralVPCLE --- NetDeployLE
    EKSVPCLENet --- EKSLENet
    EKSVPCLENet --- EKSDeployLE
    RDSVPCLENet --- RDSLENet
    RDSVPCLENet --- RDSDeployLE
    App1VPCLENet --- App1ResLENet
    App1VPCLENet --- App1ManifestLE
    App1VPCLENet --- App1SchemaLE