---
layout: default
---

<article>
    {% if page.title %}
    <h1>{{ page.title }}</h1>
    {% endif %}
    
    {{ content }}
</article>

<!-- AI Analysis Floating Button -->
<div id="ai-analysis-btn" class="ai-analysis-floating-btn" title="Analyze this article with AI">
    <div class="ai-btn-icon">ü§ñ</div>
    <div class="ai-btn-text">Analyze with AI</div>
    <div class="ai-options-dropdown" id="ai-options-dropdown">
        <button class="ai-option" data-service="perplexity">
            <span class="ai-logo">üîç</span>
            Perplexity
        </button>
        <button class="ai-option" data-service="you">
            <span class="ai-logo">ü§ñ</span>
            You.com
        </button>
        <button class="ai-option" data-service="phind">
            <span class="ai-logo">üíª</span>
            Phind
        </button>
        <hr style="margin: 8px 0; border: none; border-top: 1px solid var(--border-color);">
        <button class="ai-option" data-service="chatgpt">
            <span class="ai-logo">üí¨</span>
            ChatGPT
        </button>
        <button class="ai-option" data-service="gemini">
            <span class="ai-logo">‚ú®</span>
            Gemini
        </button>
    </div>
</div>

<style>
/* AI Analysis Floating Button Styles */
.ai-analysis-floating-btn {
    position: fixed;
    right: 20px;
    bottom: 20px;
    background: linear-gradient(135deg, var(--primary-color), #4f46e5);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 12px 20px;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
    opacity: 0.9;
    user-select: none;
    font-family: inherit;
    font-size: 14px;
    font-weight: 500;
    min-width: 60px;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.ai-analysis-floating-btn:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
    opacity: 1;
    background: linear-gradient(135deg, #0451a5, #4338ca);
}

.ai-analysis-floating-btn:active {
    transform: translateY(0) scale(0.98);
}

.ai-btn-icon {
    font-size: 20px;
    transition: transform 0.3s ease;
    flex-shrink: 0;
}

.ai-btn-text {
    white-space: nowrap;
    opacity: 0;
    width: 0;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.ai-analysis-floating-btn:hover .ai-btn-text {
    opacity: 1;
    width: auto;
    margin-left: 0;
}

.ai-analysis-floating-btn:hover .ai-btn-icon {
    transform: rotate(10deg);
}

/* AI Options Dropdown */
.ai-options-dropdown {
    position: absolute;
    bottom: calc(100% + 10px);
    right: 0;
    background: white !important;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px) scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid var(--border-color);
    overflow: visible;
    min-width: 140px;
    z-index: 9999 !important;
    pointer-events: none;

    /* Backup positioning in case bottom doesn't work */
    /* top: -200px; */
}

/* Debug version - always visible for testing */
.ai-options-dropdown.debug-show {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) scale(1) !important;
    pointer-events: auto !important;
    border: 3px solid red !important;
    background: yellow !important;
}

.ai-analysis-floating-btn:hover .ai-options-dropdown {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) scale(1) !important;
    z-index: 1001 !important;
    pointer-events: auto !important;
}

.ai-option {
    width: 100%;
    background: none;
    border: none;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    color: var(--text-color);
    font-size: 14px;
    font-weight: 500;
}

.ai-option:hover {
    background-color: #f8f9fa;
}

.ai-option:not(:last-child):not([data-service="phind"]) {
    border-bottom: 1px solid var(--border-color);
}

/* Hide the automatic border for the option before separator */
.ai-option[data-service="phind"] {
    border-bottom: none !important;
}

.ai-logo {
    font-size: 16px;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .ai-analysis-floating-btn {
        right: 15px;
        bottom: 15px;
        padding: 10px 16px;
        font-size: 13px;
    }
    
    .ai-btn-icon {
        font-size: 18px;
    }
    
    .ai-options-dropdown {
        right: -10px;
        min-width: 120px;
    }
    
    .ai-option {
        padding: 10px 12px;
        font-size: 13px;
    }
}

/* Animation for entrance */
@keyframes slideInUp {
    from {
        transform: translateY(100px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 0.9;
    }
}

.ai-analysis-floating-btn.show {
    animation: slideInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('AI Analysis button script loading...');
    
    const aiButton = document.getElementById('ai-analysis-btn');
    const aiOptions = document.getElementById('ai-options-dropdown');
    
    if (!aiButton || !aiOptions) {
        console.error('AI button elements not found!');
        return;
    }
    
    console.log('AI button elements found, initializing...');

    // Show button after a short delay
    setTimeout(() => {
        aiButton.classList.add('show');
        console.log('AI button shown');
    }, 1000);

    // Handle clicks on the main AI button
    aiButton.addEventListener('click', function(e) {
        console.log('Main AI button clicked');
        
        // Check if click is on dropdown options
        let target = e.target;
        
        // Find the ai-option element (could be the target or a parent)
        while (target && !target.classList.contains('ai-option')) {
            target = target.parentElement;
            if (!target || target === aiButton) break;
        }
        
        if (target && target.classList.contains('ai-option')) {
            console.log('AI option clicked:', target.getAttribute('data-service'));
            e.preventDefault();
            e.stopPropagation();
            const service = target.getAttribute('data-service');
            openAIService(service);
        } else {
            // If user clicked the main button (not an option), default to Perplexity
            console.log('Main button clicked - defaulting to Perplexity');
            openAIService('perplexity');
        }
    });

    // Also handle hover state for showing options
    let isHovering = false;
    aiButton.addEventListener('mouseenter', function() {
        isHovering = true;
        console.log('Hovering over AI button - options should be visible');
    });
    
    aiButton.addEventListener('mouseleave', function() {
        isHovering = false;
        console.log('Left AI button hover area');
    });

    function openAIService(service) {
        console.log('Opening AI service:', service);
        
        const currentUrl = window.location.href;
        const articleTitle = document.querySelector('h1') ? document.querySelector('h1').textContent.trim() : 'this article';
        
        console.log('Article URL:', currentUrl);
        console.log('Article Title:', articleTitle);
        
        // Create the prompt
        const prompt = `Please think ultra hard and analyze/summarize this article about software engineering and distributed systems: "${articleTitle}"

Article URL: ${currentUrl}

Please provide:
1. A concise summary of the main points
2. Key takeaways and insights
3. How this relates to current trends in software engineering

Focus on the technical and architectural concepts discussed.`;

        console.log('Generated prompt:', prompt);
        
        // URL encode the prompt for use in query parameters
        const encodedPrompt = encodeURIComponent(prompt);
        
        let url;
        switch(service) {
            case 'perplexity':
                // Perplexity supports URL parameters with ?q=
                url = `https://perplexity.ai/?q=${encodedPrompt}`;
                break;
            case 'you':
                // You.com supports URL parameters with ?q=
                url = `https://you.com/search?q=${encodedPrompt}`;
                break;
            case 'phind':
                // Phind supports URL parameters with ?q=
                url = `https://www.phind.com/search?q=${encodedPrompt}`;
                break;
            default:
                console.error('Unknown service:', service);
                return;
        }
        
        console.log('Opening URL:', url);
        
        // Open in new tab
        const newWindow = window.open(url, '_blank', 'noopener,noreferrer');
        
        if (!newWindow) {
            console.error('Failed to open new window - popup blocked?');
            alert('Please allow popups and try again, or manually open ' + url);
        }
        
        // Optional: Track usage (if you have analytics)
        if (typeof gtag !== 'undefined') {
            gtag('event', 'ai_analysis_click', {
                'ai_service': service,
                'article_url': currentUrl,
                'article_title': articleTitle
            });
        }
    }
    


    // Hide button when scrolling near bottom (so it doesn't cover footer)
    let ticking = false;
    function updateButtonVisibility() {
        if (!ticking) {
            requestAnimationFrame(() => {
                const scrolled = window.scrollY;
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight;
                const scrolledPercentage = (scrolled + windowHeight) / documentHeight;
                
                // Hide button when user is in the last 10% of the page
                if (scrolledPercentage > 0.9) {
                    aiButton.style.transform = 'translateY(100px)';
                    aiButton.style.opacity = '0';
                } else {
                    aiButton.style.transform = 'translateY(0)';
                    aiButton.style.opacity = '0.9';
                }
                
                ticking = false;
            });
        }
        ticking = true;
    }

    window.addEventListener('scroll', updateButtonVisibility);
    
    console.log('AI Analysis button script fully loaded and ready!');
});
</script> 